(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const Ne=(e,t)=>e===t,Me=Symbol("solid-track"),Y={equals:Ne};let pe=Ce;const I=1,Z=2,be={owned:null,cleanups:null,context:null,owner:null};var p=null;let oe=null,y=null,S=null,B=null,se=0;function G(e,t){const n=y,s=p,i=e.length===0,r=t===void 0?s:t,l=i?be:{owned:null,cleanups:null,context:r?r.context:null,owner:r},o=i?e:()=>e(()=>O(()=>ie(l)));p=l,y=null;try{return J(o,!0)}finally{y=n,p=s}}function T(e,t){t=t?Object.assign({},Y,t):Y;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=i=>(typeof i=="function"&&(i=i(n.value)),Ae(n,i));return[xe.bind(n),s]}function z(e,t,n){const s=fe(e,t,!1,I);q(s)}function Se(e,t,n){pe=Ie;const s=fe(e,t,!1,I);(!n||!n.render)&&(s.user=!0),B?B.push(s):q(s)}function F(e,t,n){n=n?Object.assign({},Y,n):Y;const s=fe(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,q(s),xe.bind(s)}function O(e){if(y===null)return e();const t=y;y=null;try{return e()}finally{y=t}}function Be(e){Se(()=>O(e))}function Oe(e){return p===null||(p.cleanups===null?p.cleanups=[e]:p.cleanups.push(e)),e}function xe(){if(this.sources&&this.state)if(this.state===I)q(this);else{const e=S;S=null,J(()=>te(this),!1),S=e}if(y){const e=this.observers?this.observers.length:0;y.sources?(y.sources.push(this),y.sourceSlots.push(e)):(y.sources=[this],y.sourceSlots=[e]),this.observers?(this.observers.push(y),this.observerSlots.push(y.sources.length-1)):(this.observers=[y],this.observerSlots=[y.sources.length-1])}return this.value}function Ae(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&J(()=>{for(let i=0;i<e.observers.length;i+=1){const r=e.observers[i],l=oe&&oe.running;l&&oe.disposed.has(r),(l?!r.tState:!r.state)&&(r.pure?S.push(r):B.push(r),r.observers&&Te(r)),l||(r.state=I)}if(S.length>1e6)throw S=[],new Error},!1)),t}function q(e){if(!e.fn)return;ie(e);const t=se;De(e,e.value,t)}function De(e,t,n){let s;const i=p,r=y;y=p=e;try{s=e.fn(t)}catch(l){return e.pure&&(e.state=I,e.owned&&e.owned.forEach(ie),e.owned=null),e.updatedAt=n+1,Ee(l)}finally{y=r,p=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ae(e,s):e.value=s,e.updatedAt=n)}function fe(e,t,n,s=I,i){const r={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:p,context:p?p.context:null,pure:n};return p===null||p!==be&&(p.owned?p.owned.push(r):p.owned=[r]),r}function ee(e){if(e.state===0)return;if(e.state===Z)return te(e);if(e.suspense&&O(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<se);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===I)q(e);else if(e.state===Z){const s=S;S=null,J(()=>te(e,t[0]),!1),S=s}}function J(e,t){if(S)return e();let n=!1;t||(S=[]),B?n=!0:B=[],se++;try{const s=e();return We(n),s}catch(s){n||(B=null),S=null,Ee(s)}}function We(e){if(S&&(Ce(S),S=null),e)return;const t=B;B=null,t.length&&J(()=>pe(t),!1)}function Ce(e){for(let t=0;t<e.length;t++)ee(e[t])}function Ie(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:ee(s)}for(t=0;t<n;t++)ee(e[t])}function te(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];if(s.sources){const i=s.state;i===I?s!==t&&(!s.updatedAt||s.updatedAt<se)&&ee(s):i===Z&&te(s,t)}}}function Te(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Z,n.pure?S.push(n):B.push(n),n.observers&&Te(n))}}function ie(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const r=i.pop(),l=n.observerSlots.pop();s<i.length&&(r.sourceSlots[l]=s,i[s]=r,n.observerSlots[s]=l)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ie(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Xe(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ee(e,t=p){throw Xe(e)}const Re=Symbol("fallback");function me(e){for(let t=0;t<e.length;t++)e[t]()}function ze(e,t,n={}){let s=[],i=[],r=[],l=0,o=t.length>1?[]:null;return Oe(()=>me(r)),()=>{let c=e()||[],h,u;return c[Me],O(()=>{let v=c.length,f,b,w,E,L,d,A,C,k;if(v===0)l!==0&&(me(r),r=[],s=[],i=[],l=0,o&&(o=[])),n.fallback&&(s=[Re],i[0]=G(D=>(r[0]=D,n.fallback())),l=1);else if(l===0){for(i=new Array(v),u=0;u<v;u++)s[u]=c[u],i[u]=G(x);l=v}else{for(w=new Array(v),E=new Array(v),o&&(L=new Array(v)),d=0,A=Math.min(l,v);d<A&&s[d]===c[d];d++);for(A=l-1,C=v-1;A>=d&&C>=d&&s[A]===c[C];A--,C--)w[C]=i[A],E[C]=r[A],o&&(L[C]=o[A]);for(f=new Map,b=new Array(C+1),u=C;u>=d;u--)k=c[u],h=f.get(k),b[u]=h===void 0?-1:h,f.set(k,u);for(h=d;h<=A;h++)k=s[h],u=f.get(k),u!==void 0&&u!==-1?(w[u]=i[h],E[u]=r[h],o&&(L[u]=o[h]),u=b[u],f.set(k,u)):r[h]();for(u=d;u<v;u++)u in w?(i[u]=w[u],r[u]=E[u],o&&(o[u]=L[u],o[u](u))):i[u]=G(x);i=i.slice(0,l=v),s=c.slice(0)}return i});function x(v){if(r[u]=v,o){const[f,b]=T(u);return o[u]=b,t(c[u],f)}return t(c[u])}}}function N(e,t){return O(()=>e(t||{}))}const He=e=>`Stale read from <${e}>.`;function le(e){const t="fallback"in e&&{fallback:()=>e.fallback};return F(ze(()=>e.each,e.children,t||void 0))}function Ue(e){const t=e.keyed,n=F(()=>e.when,void 0,{equals:(s,i)=>t?s===i:!s==!i});return F(()=>{const s=n();if(s){const i=e.children;return typeof i=="function"&&i.length>0?O(()=>i(t?s:()=>{if(!O(n))throw He("Show");return e.when})):i}return e.fallback},void 0,void 0)}function je(e,t,n){let s=n.length,i=t.length,r=s,l=0,o=0,c=t[i-1].nextSibling,h=null;for(;l<i||o<r;){if(t[l]===n[o]){l++,o++;continue}for(;t[i-1]===n[r-1];)i--,r--;if(i===l){const u=r<s?o?n[o-1].nextSibling:n[r-o]:c;for(;o<r;)e.insertBefore(n[o++],u)}else if(r===o)for(;l<i;)(!h||!h.has(t[l]))&&t[l].remove(),l++;else if(t[l]===n[r-1]&&n[o]===t[i-1]){const u=t[--i].nextSibling;e.insertBefore(n[o++],t[l++].nextSibling),e.insertBefore(n[--r],u),t[i]=n[r]}else{if(!h){h=new Map;let x=o;for(;x<r;)h.set(n[x],x++)}const u=h.get(t[l]);if(u!=null)if(o<u&&u<r){let x=l,v=1,f;for(;++x<i&&x<r&&!((f=h.get(t[x]))==null||f!==u+v);)v++;if(v>u-o){const b=t[l];for(;o<u;)e.insertBefore(n[o++],b)}else e.replaceChild(n[o++],t[l++])}else l++;else t[l++].remove()}}}const ve="_$DX_DELEGATE";function Fe(e,t,n,s={}){let i;return G(r=>{i=r,t===document?e():M(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{i(),t.textContent=""}}function re(e,t,n){let s;const i=()=>{const l=document.createElement("template");return l.innerHTML=e,n?l.content.firstChild.firstChild:l.content.firstChild},r=t?()=>O(()=>document.importNode(s||(s=i()),!0)):()=>(s||(s=i())).cloneNode(!0);return r.cloneNode=r,r}function ae(e,t=window.document){const n=t[ve]||(t[ve]=new Set);for(let s=0,i=e.length;s<i;s++){const r=e[s];n.has(r)||(n.add(r),t.addEventListener(r,Je))}}function W(e,t){t==null?e.removeAttribute("class"):e.className=t}function ue(e,t,n,s){if(s)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=r=>i.call(e,n[1],r))}else e.addEventListener(t,n)}function qe(e,t,n){return O(()=>e(t,n))}function M(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return ne(e,t,s,n);z(i=>ne(e,t(),i,n),s)}function Je(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const s=n[t];if(s&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?s.call(n,i,e):s.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function ne(e,t,n,s,i){for(;typeof n=="function";)n=n();if(t===n)return n;const r=typeof t,l=s!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,r==="string"||r==="number")if(r==="number"&&(t=t.toString()),l){let o=n[0];o&&o.nodeType===3?o.data=t:o=document.createTextNode(t),n=H(e,n,s,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||r==="boolean")n=H(e,n,s);else{if(r==="function")return z(()=>{let o=t();for(;typeof o=="function";)o=o();n=ne(e,o,n,s)}),()=>n;if(Array.isArray(t)){const o=[],c=n&&Array.isArray(n);if(ce(o,t,n,i))return z(()=>n=ne(e,o,n,s,!0)),()=>n;if(o.length===0){if(n=H(e,n,s),l)return n}else c?n.length===0?we(e,o,s):je(e,n,o):(n&&H(e),we(e,o));n=o}else if(t.nodeType){if(Array.isArray(n)){if(l)return n=H(e,n,s,t);H(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function ce(e,t,n,s){let i=!1;for(let r=0,l=t.length;r<l;r++){let o=t[r],c=n&&n[r],h;if(!(o==null||o===!0||o===!1))if((h=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))i=ce(e,o,c)||i;else if(h==="function")if(s){for(;typeof o=="function";)o=o();i=ce(e,Array.isArray(o)?o:[o],Array.isArray(c)?c:[c])||i}else e.push(o),i=!0;else{const u=String(o);c&&c.nodeType===3&&c.data===u?e.push(c):e.push(document.createTextNode(u))}}return i}function we(e,t,n=null){for(let s=0,i=t.length;s<i;s++)e.insertBefore(t[s],n)}function H(e,t,n,s){if(n===void 0)return e.textContent="";const i=s||document.createTextNode("");if(t.length){let r=!1;for(let l=t.length-1;l>=0;l--){const o=t[l];if(i!==o){const c=o.parentNode===e;!r&&!l?c?e.replaceChild(i,o):e.insertBefore(i,n):c&&o.remove()}else r=!0}}else e.insertBefore(i,n);return[i]}function ke(e,t){const n=Math.floor(e),s=Math.floor((e-n)*60);return n&&s||t!=null&&t.full?`${n}h ${s}m`:n===0?`${s}m`:`${n}h`}function Pe(e,t){const n=Math.floor(e),s=Math.floor((e-n)*60),i=n.toString().padStart(2,"0"),r=s.toString().padStart(2,"0");if(t!=null&&t.seconds){const o=Math.floor((e-n-s/60)*60*60).toString().padStart(2,"0");return`${i}:${r}:${o}`}else return`${i}:${r}`}const Ke="_block_1gr8m_1",Qe="_moving_1gr8m_13",Ge="_handleTarget_1gr8m_17",Ve="_handle_1gr8m_17",Ye="_resizing_1gr8m_35",Ze="_time_1gr8m_42",et="_name_1gr8m_43",R={block:Ke,moving:Qe,handleTarget:Ge,handle:Ve,resizing:Ye,time:Ze,name:et},tt=re("<div><span></span><div><div></div></div><span>");function $e(e,t){return Math.round(e/t)*t}function nt(e){const[t,n]=T(!1),[s,i]=T(!1),[r,l]=T({startPos:0,startX:0}),[o,c]=T({startWidth:0,startX:0});function h(f){l({startPos:e.pos,startX:f.clientX}),n(!0),e.onStartChange()}function u(f){f.stopPropagation(),c({startWidth:e.width,startX:f.clientX}),i(!0),e.onStartChange()}function x(f){if(t()){const{startPos:b,startX:w}=r(),E=Math.min(e.maxPos,Math.max(0,b+f.clientX-w));e.onChange($e(E,e.step),e.width)}else if(s()){const{startWidth:b,startX:w}=o(),E=Math.min(e.maxWidth,Math.max(e.step,b+f.clientX-w));e.onChange(e.pos,$e(E,e.step))}}function v(){n(!1),i(!1)}return window.addEventListener("pointerup",v),window.addEventListener("pointermove",x),(()=>{const f=tt(),b=f.firstChild,w=b.nextSibling,E=w.firstChild,L=w.nextSibling;return ue(f,"dblclick",e.onRemove,!0),ue(f,"pointermove",e.onHover,!0),f.$$pointerdown=h,M(b,()=>e.name),M(f,(()=>{const d=F(()=>e.duration>.25);return()=>d()?ke(e.duration):""})(),w),w.$$pointerdown=d=>d.stopPropagation(),E.$$pointerdown=u,M(L,()=>Pe(e.start)),z(d=>{const A=`${R.block} ${t()?R.moving:""} ${s()?R.resizing:""}`,C=`${e.pos}px`,k=`${e.width}px`,D=R.name,K=R.handleTarget,U=R.handle,Q=R.time;return A!==d._v$&&W(f,d._v$=A),C!==d._v$2&&((d._v$2=C)!=null?f.style.setProperty("left",C):f.style.removeProperty("left")),k!==d._v$3&&((d._v$3=k)!=null?f.style.setProperty("width",k):f.style.removeProperty("width")),D!==d._v$4&&W(b,d._v$4=D),K!==d._v$5&&W(w,d._v$5=K),U!==d._v$6&&W(E,d._v$6=U),Q!==d._v$7&&W(L,d._v$7=Q),d},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0}),f})()}ae(["pointerdown","pointermove","dblclick"]);const st="_timelineContainer_o0zof_1",it="_timeline_o0zof_1",rt="_tick_o0zof_14",ot="_nowLine_o0zof_27",V={timelineContainer:st,timeline:it,tick:rt,nowLine:ot},lt=re("<div>"),ut=re("<div><div></div><div></div><div></div><div></div><form><input></form><button>delete");let ct=0;function ye(e){return(()=>{const t=lt();return M(t,()=>e.hour),z(n=>{const s=`${V.tick} ${e.class?e.class:""}`,i=`${e.pos}px`;return s!==n._v$&&W(t,n._v$=s),i!==n._v$2&&((n._v$2=i)!=null?t.style.setProperty("left",i):t.style.removeProperty("left")),n},{_v$:void 0,_v$2:void 0}),t})()}function _e(e){return Math.round(e*4)/4}function ft(e){return Math.floor(e*4)/4}function at(e){let t;const[n,s]=T(0),[i,r]=T(0),[l,o]=T(),[c,h]=T(0),[u,x]=T(""),[v,f]=e.blocks,b=()=>e.endHour-e.startHour,w=()=>n()/b();function E(){s(t.clientWidth),D()}window.addEventListener("resize",E),Be(E);function L(g){f(a=>[...a.filter(_=>_!==g),g])}function d(g,a,m){const[_,P]=g;P({..._(),start:_e(a/w()),duration:_e(m/w())}),D()}function A(g){f(a=>a.filter(m=>m!==g))}function C(g){const[a]=g,m=()=>a().start*w(),_=()=>a().duration*w();return N(nt,{get id(){return a().id},get step(){return w()/4},get name(){return a().name},get start(){return a().start},get duration(){return a().duration},get pos(){return m()},get width(){return _()},get maxPos(){return n()-_()},get maxWidth(){return n()-m()},onStartChange:()=>L(g),onHover:()=>L(g),onChange:(P,X)=>d(g,P,X),onRemove:()=>A(g)})}function k(g){let a;for(const m of v()){const[_]=m;_().start>g&&(!a||_().start<a.start)&&(a=_())}return a}function D(){const g=new Date,a=g.getHours(),m=g.getMinutes(),_=g.getSeconds(),P=a+m/60+_/60/60,X=P/24*n();r(X),h(P),o(k(P))}setInterval(D,1e3);function K(g){let[,a,m]=g.trim().match(/(.+) ([0-9.]+)/i)||[];a||(a=g.trim());const _=m!=null&&m.trim()?m==="15"?.25:m==="30"?.5:parseFloat(m):1;return[a,_]}function U(g,a){if(!g)return;const[m,_]=K(g);f(P=>[...P,T({id:ct++,name:m,start:a,duration:_})])}function Q(g=0){U(prompt(),g)}return(()=>{const g=ut(),a=g.firstChild,m=a.nextSibling,_=m.nextSibling,P=_.nextSibling,X=P.nextSibling,de=X.firstChild,Le=X.nextSibling;a.$$pointerdown=$=>{$.target===$.currentTarget&&$.buttons===2&&Q(ft($.offsetX/n()*24))},a.$$contextmenu=$=>$.preventDefault();const he=t;return typeof he=="function"?qe(he,a):t=a,M(a,N(Ue,{get when(){return n()!==0},get children(){return[N(le,{get each(){return Array.from({length:b()})},children:($,j)=>N(ye,{get hour(){return j()},get pos(){return j()*w()}})}),N(le,{get each(){return v()},children:C}),N(ye,{get pos(){return i()},get class(){return V.nowLine}})]}})),M(m,()=>Pe(c(),{seconds:!0})),M(_,()=>{var $;return($=l())==null?void 0:$.name}),M(P,(()=>{const $=F(()=>!!l());return()=>$()?ke(l().start-c(),{full:!0}):""})()),X.addEventListener("submit",$=>{$.preventDefault(),U(u(),0),x("")}),de.addEventListener("change",$=>x($.target.value)),ue(Le,"click",e.onDelete,!0),z($=>{const j=V.timelineContainer,ge=V.timeline;return j!==$._v$3&&W(g,$._v$3=j),ge!==$._v$4&&W(a,$._v$4=ge),$},{_v$3:void 0,_v$4:void 0}),z(()=>de.value=u()),g})()}ae(["contextmenu","pointerdown","click"]);const dt=re("<button>Add");function ht(){const e=(()=>{const o=new URLSearchParams(window.location.search).get("timelines");return o?JSON.parse(atob(o)).map(c=>({blocks:T(c.blocks.map(h=>T({id:h.id,name:h.name,start:h.start,duration:h.duration})))})):[]})(),[t,n]=T(e);function s(){n([...t(),{blocks:T([])}])}function i(){return JSON.stringify(t().map(l=>{const[o]=l.blocks;return{blocks:o().map(([c])=>c())}}))}function r(l){n(t().filter(o=>o!==l))}return Se(()=>{history.replaceState({},"",`?timelines=${encodeURIComponent(btoa(i()))}`)}),[(()=>{const l=dt();return l.$$click=s,l})(),N(le,{get each(){return t()},children:l=>N(at,{startHour:0,endHour:24,get blocks(){return l.blocks},onDelete:()=>r(l)})})]}ae(["click"]);const gt=document.getElementById("root");Fe(()=>N(ht,{}),gt);
